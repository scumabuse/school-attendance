# API Маршруты

Эта папка содержит все API маршруты для системы посещаемости колледжа.

## Структура

```
api/
├── routes/              # Маршруты по модулям
│   ├── auth.js         # Аутентификация
│   ├── users.js        # Пользователи
│   ├── specialties.js  # Специальности
│   ├── qualifications.js # Квалификации
│   ├── holidays.js     # Праздники
│   ├── groups.js       # Группы
│   ├── students.js     # Студенты
│   ├── attendance.js   # Посещаемость
│   └── admin.js        # Административные функции
├── middleware/         # Middleware
│   └── auth.js         # Аутентификация и авторизация
├── index.js           # Главный файл для объединения всех маршрутов
├── API_DOCUMENTATION.md # Полная документация API
└── README.md          # Этот файл
```

## Подключение к server.js

Чтобы использовать эти маршруты в `server.js`, добавьте следующее:

```javascript
// В начале файла server.js
const apiRoutes = require('../api');

// После настройки middleware (cors, express.json и т.д.)
app.use('/api', apiRoutes);
```

**Важно:** Не изменяйте файлы в папке `backend`, только подключайте маршруты из папки `api`.

## Особенности

1. **Модульная структура** - каждый модуль имеет свой файл маршрутов
2. **Middleware для аутентификации** - все маршруты защищены (кроме `/api/auth/login` и `/api/test`)
3. **Проверка прав доступа** - разные уровни доступа для разных ролей
4. **Валидация данных** - проверка входных данных перед обработкой
5. **Обработка ошибок** - единообразная обработка ошибок

## Роли и доступ

- **ADMIN** - полный доступ ко всем маршрутам
- **HEAD** - доступ к админ-панели (кроме управления пользователями)
- **TEACHER** - ограниченный доступ (только просмотр)

## Примеры использования

### Аутентификация
```javascript
POST /api/auth/login
{
  "login": "admin",
  "password": "admin123"
}
```

### Получение списка групп
```javascript
GET /api/admin/groups
Headers: Authorization: Bearer <token>
```

### Создание студента
```javascript
POST /api/admin/students
Headers: Authorization: Bearer <token>
{
  "fullName": "Иванов Иван Иванович",
  "groupId": "uuid"
}
```

## Документация

Полная документация всех маршрутов находится в файле `API_DOCUMENTATION.md`.

## Зависимости

Все маршруты используют:
- `express` - веб-фреймворк
- `@prisma/client` - ORM для работы с БД
- `bcryptjs` - хеширование паролей
- `jsonwebtoken` - JWT токены
- `luxon` - работа с датами
- `multer` - загрузка файлов

Эти зависимости должны быть установлены в проекте.




