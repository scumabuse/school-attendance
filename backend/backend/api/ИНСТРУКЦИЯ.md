# Инструкция по использованию API маршрутов

## Быстрый старт

Все API маршруты находятся в папке `api/` и готовы к использованию.

### Подключение к server.js

Чтобы подключить все маршруты к вашему серверу, добавьте в `server.js` (в начале файла, после импортов):

```javascript
const apiRoutes = require('../api');
```

И после настройки middleware (после `app.use(cors())`, `app.use(express.json())` и т.д.):

```javascript
app.use('/api', apiRoutes);
```

**Важно:** Не изменяйте другие части `server.js`, только добавьте эти две строки.

### Что было создано

1. **Маршруты по модулям** (`api/routes/`):
   - `auth.js` - аутентификация
   - `users.js` - пользователи
   - `specialties.js` - специальности
   - `qualifications.js` - квалификации
   - `holidays.js` - праздники
   - `groups.js` - группы
   - `students.js` - студенты
   - `attendance.js` - посещаемость
   - `admin.js` - административные функции

2. **Middleware** (`api/middleware/`):
   - `auth.js` - аутентификация и авторизация

3. **Главный файл**:
   - `index.js` - объединяет все маршруты

4. **Документация**:
   - `API_DOCUMENTATION.md` - полная документация всех маршрутов
   - `README.md` - описание структуры

### Все маршруты из server.js

Все маршруты, которые были в `server.js`, теперь находятся в папке `api/`:
- ✅ Аутентификация (`/api/auth/login`)
- ✅ Пользователи (`/api/admin/users`)
- ✅ Специальности (`/api/specialties`, `/api/admin/specialties`)
- ✅ Квалификации (`/api/admin/qualifications`)
- ✅ Праздники (`/api/admin/holidays`)
- ✅ Группы (`/api/admin/groups`, `/api/admin/curators`)
- ✅ Студенты (`/api/students`, `/api/admin/students`, `/api/admin/import/students`)
- ✅ Посещаемость (`/api/attendance`, `/api/attendance/log`)
- ✅ Экспорт (`/api/export/attendance`)
- ✅ Административные функции (`/api/admin/finish-year`, `/api/admin/stats`)

### Дополнительные маршруты

Также добавлены новые полезные маршруты:
- `POST /api/auth/verify` - проверка токена
- `GET /api/attendance/:id` - получение записи посещаемости по ID
- `PUT /api/attendance/:id` - полное обновление посещаемости
- `POST /api/attendance/batch` - массовое обновление посещаемости
- `GET /api/admin/stats` - статистика системы
- `GET /api/admin/stats/attendance` - статистика посещаемости
- И другие...

### Проверка работы

После подключения маршрутов проверьте:
```bash
GET http://localhost:5000/api/test
```

Должен вернуться ответ: `{ "message": "Бэкенд работает!" }`

### Документация

Полная документация всех маршрутов с примерами находится в файле `API_DOCUMENTATION.md`.




